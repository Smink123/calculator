<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class='calculator'>
    <div class="input" id="input"></div>
    <div class="buttons">
      <div class="operators">
        <div>+</div>
        <div>-</div>
        <div>&times</div>
        <div>&divide</div>
      </div>
      <div class="numbersAndEquals">
        <div class="allNums">
          <div class="numbers">
            <div>7</div>
            <div>8</div>
            <div>9</div>
          </div>
          <div class="numbers">
            <div>4</div>
            <div>5</div>
            <div>6</div>
          </div>
          <div class="numbers">
            <div>1</div>
            <div>2</div>
            <div>3</div>
          </div>
          <div class="numbers">
            <div>0</div>
            <div>.</div>
            <div id="clear">C</div>
          </div>
        </div>
        <div class="equal" id="result">=</div>
      </div>
    </div>
  </div>
  <script>
    const input = document.getElementById('input');
    const number = document.querySelectorAll('.numbers div');
    const operator = document.querySelectorAll('.operators div');
    const result = document.getElementById('result');
    const clear = document.getElementById('clear');
    let resultDisplayed = false // flag to check what output is displayed
    const operatorsPattern = /[+\u00F7\u00D7]/;
    for (let i = 0; i < number.length; i++) {
    number[i].addEventListener('click', function(e) {
        let currentString = input.innerHTML; //what is current on the input screen
        let lastChar = currentString[currentString.length - 1] //the last value of the string (number or operator)

        if (resultDisplayed === false) { //if the result is empty, insert numbers
            input.innerHTML += e.target.innerHTML;
        } else if (resultDisplayed === true && operatorsPattern.test(lastChar)) { //when values are inserted, and the last character is an operator, the new number/operator is appeneded and results the result Displayed flag
            resultDisplayed = false;
            input.innerHTML += e.target.innerHTML;
        } else { //if none of the above is true, the input is cleared and result is reset.
            resultDisplayed = false;
            input.innerHTML = '';
            input.innerHTML += e.target.innerHTML;
        }
    });
}


    for (let i = 0; i < operator.length; i++) {
    operator[i].addEventListener('click', function(e) {
        let currentString = input.innerHTML;
        let lastChar = currentString[currentString.length - 1];

        if (lastChar === '+' || lastChar === '-' || lastChar === 'ร' || lastChar === 'รท') { //if last value is an operator, and another operator is clicked - replace with the newer operator
            let newString = currentString.substring(0, currentString.length - 1) + e.target.innerHTML;
            input.innerHTML = newString;
        } else if (currentString.length === 0) {
            console.log('Enter a number first');
        } else { //if all the above is true, just add the operator clicked
            input.innerHTML += e.target.innerHTML;
        }
    });
}

  </script>
</body>

</html>